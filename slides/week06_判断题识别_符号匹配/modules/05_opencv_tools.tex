%===========================================================
% 05_opencv_tools.tex - OpenCV工具介绍
%===========================================================
\section{OpenCV工具介绍}

\begin{frame}[fragile]{轮廓相关API}
    \textbf{轮廓查找：}
    \begin{lstlisting}[basicstyle=\ttfamily\scriptsize]
contours, hierarchy = cv2.findContours(
    binary_image,
    cv2.RETR_EXTERNAL,  # 只检测外轮廓
    cv2.CHAIN_APPROX_SIMPLE  # 压缩轮廓点
)
    \end{lstlisting}

    \textbf{轮廓特征计算：}
    \begin{lstlisting}[basicstyle=\ttfamily\scriptsize]
area = cv2.contourArea(contour)
perimeter = cv2.arcLength(contour, True)
x, y, w, h = cv2.boundingRect(contour)
    \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{模板匹配API}
    \textbf{单模板匹配：}
    \begin{lstlisting}[basicstyle=\ttfamily\scriptsize]
result = cv2.matchTemplate(
    image,           # 待搜索图像
    template,        # 模板图像
    cv2.TM_CCOEFF_NORMED  # 匹配方法
)

min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(result)
    \end{lstlisting}

    \textbf{多模板匹配（阈值过滤）：}
    \begin{lstlisting}[basicstyle=\ttfamily\scriptsize]
locations = np.where(result >= threshold)
for pt in zip(*locations[::-1]):
    # 处理每个匹配位置
    pass
    \end{lstlisting}
\end{frame}

\begin{frame}[fragile]{矩特征API}
    \textbf{计算Hu矩：}
    \begin{lstlisting}[basicstyle=\ttfamily\scriptsize]
# 计算图像矩
moments = cv2.moments(contour)

# 计算Hu矩（7个不变量）
hu_moments = cv2.HuMoments(moments)

# Hu矩范围差异大，通常取对数
hu_moments = -np.sign(hu_moments) * np.log10(abs(hu_moments))
    \end{lstlisting}

    \textbf{应用场景：}
    \begin{itemize}
        \item 形状匹配
        \item 物体识别
        \item 姿态估计
    \end{itemize}
\end{frame}
