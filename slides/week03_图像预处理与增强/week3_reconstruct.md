# Week 3: 图像预处理与增强 - 60页扩展策略

## 当前状态
- 现有页数：14页
- 目标页数：60页
- 需增加：46页

## 60页标准结构规划

### 1. 背景知识铺垫 (8-12页)

#### 1.1 图像预处理的重要性 (2-3页)
- 为什么预处理是计算机视觉的"门卫"？
- 真实场景案例分析
  - 手机拍照 vs 扫描仪
  - 低光照试卷拍摄问题
  - 阴影、模糊、噪点的影响
- 预处理对后续识别的决定性作用

#### 1.2 数字图像基础回顾 (2-3页)
- 像素、分辨率、色彩空间
- 灰度图像 vs 彩色图像
- 图像存储格式对比（BMP、PNG、JPEG）
- OpenCV中的图像表示（ndarray）

#### 1.3 预处理应用场景全景 (3-4页)
- OCR文字识别预处理
- 医学影像预处理
- 自动驾驶场景预处理
- 工业质检预处理
- 人脸识别预处理

### 2. 核心理论与原理 (12-18页)

#### 2.1 图像去噪理论 (4-5页)

**2.1.1 噪声模型与分类**
- 高斯噪声：概率密度函数、产生原因
- 椒盐噪声：特征、来源
- 泊松噪声、均匀噪声简介
- 试卷扫描中常见的噪声类型

**2.1.2 空间域滤波原理**
- 卷积操作详解
- 滤波核/卷积核概念
- 边界处理方法（填充策略）
- 均值滤波：原理、优缺点
- 加权滤波思想

**2.1.3 频域滤波简介**
- 傅里叶变换与滤波
- 高通、低通、带通滤波器
- 频域去噪的适用场景

**2.1.4 非局部均值去噪（NLM）**
- 原理：利用图像自相似性
- 与局部滤波的对比
- OpenCV实现：cv2.fastNlMeansDenoising
- 参数调优指南

#### 2.2 图像增强理论 (4-5页)

**2.2.1 直方图与对比度**
- 图像直方图概念与绘制
- 对比度定义与计算
- 低对比度图像的特征

**2.2.2 直方图均衡化**
- 原理：累积分布函数（CDF）
- 全局直方图均衡化
- 自适应直方图均衡化（CLAHE）
- CLAHE在试卷增强中的应用
- 参数：clipLimit、tileGridSize

**2.2.3 伽马校正**
- 原理：幂律变换
- 伽马值对图像亮度的影响
- 暗部/亮部细节的恢复
- 试卷图像的伽马校正策略

**2.2.4 锐化技术**
- 拉普拉斯锐化
- Unsharp Mask（USM）锐化
- 高反差保留
- 锐化与噪声的平衡

#### 2.3 图像二值化理论 (4-5页)

**2.3.1 二值化的意义与应用**
- 为什么要二值化？
- 文档分析与OCR中的二值化
- 二值化质量对识别的影响

**2.3.2 全局阈值方法**
- 固定阈值法
- 直方图双峰法
- 均值法、中值法
- 百分比阈值法

**2.3.3 Otsu自动阈值算法**
- 原理：类间方差最大化
- 算法步骤详解
- 双峰直方图的最优阈值
- OpenCV实现与参数

**2.3.4 自适应阈值方法**
- 背景：光照不均问题
- 局部阈值计算策略
- 均值自适应（ADAPTIVE_THRESH_MEAN_C）
- 高斯自适应（ADAPTIVE_THRESH_GAUSSIAN_C）
- 窗口大小与C值的选择

**2.3.5 Sauvola与Niblack算法**
- 背景：手写文档二值化
- Niblack算法原理
- Sauvola改进算法
- OpenCV扩展实现

#### 2.4 几何变换理论 (3-4页)

**2.4.1 仿射变换**
- 仿射变换矩阵
- 平移、旋转、缩放、剪切
- 矩阵乘法表示
- OpenCV实现：cv2.warpAffine

**2.4.2 透视变换（投影变换）**
- 透视变换矩阵（3x3）
- 四点对应关系
- 单应性矩阵（Homography）
- OpenCV实现：cv2.getPerspectiveTransform、cv2.warpPerspective

**2.4.3 透视矫正应用**
- 文档扫描应用
- 矩形检测与矫正
- 相机标定基础

### 3. 工具与环境介绍 (5-8页)

#### 3.1 OpenCV图像预处理模块 (2-3页)
- cv2.filter2D - 自定义滤波
- cv2.blur, cv2.GaussianBlur, cv2.medianBlur, cv2.bilateralFilter
- cv2.threshold, cv2.adaptiveThreshold
- cv2.erode, cv2.dilate - 形态学操作
- cv2.warpAffine, cv2.warpPerspective
- cv2.resize与插值方法

#### 3.2 图像处理工具链 (2-3页)
- NumPy数组操作基础
- Matplotlib可视化
- PIL/Pillow补充功能
- scikit-image高级功能

#### 3.3 实验环境配置 (1-2页)
- Conda环境创建
- 依赖包安装脚本
- GPU加速配置（可选）
- 常见问题解决

### 4. Live Coding实战 (20-25页) ⭐ 核心

#### 4.1 图像去噪实战 (5-6页)

**4.1.1 基础去噪对比**
- 加载并显示噪声图像
- 应用均值滤波、高斯滤波、中值滤波
- 效果对比与PSNR计算
- 运行时间与效果权衡

**4.1.2 高级去噪技术**
- 双边滤波边缘保留去噪
- 非局部均值去噪（NLM）
- 快速NLM与参数调优
- 试卷图像去噪最佳实践

**4.1.3 批量处理脚本**
- 文件夹遍历处理
- 批处理参数配置
- 进度显示与日志记录
- 处理结果保存

#### 4.2 图像增强实战 (5-6页)

**4.2.1 直方图分析与均衡化**
- 绘制图像直方图
- 全局直方图均衡化
- CLAHE自适应均衡化
- 试卷增强参数优化

**4.2.2 亮度与对比度调整**
- 线性变换调整
- 伽马校正实现
- 自动对比度拉伸
- 多图像批量调整

**4.2.3 锐化与细节增强**
- 拉普拉斯锐化核
- Unsharp Mask实现
- 高反差保留技术
- 增强与噪声抑制平衡

#### 4.3 二值化实战 (5-6页)

**4.3.1 基础二值化方法**
- 固定阈值二值化
- 手动阈值选择技巧
- 反色二值化应用
- 多阈值分段处理

**4.3.2 自动阈值算法**
- Otsu算法实现与原理
- 双峰直方图检测
- 自适应阈值参数调优
- 窗口大小与C值实验

**4.3.3 高级二值化技术**
- Sauvola算法实现
- 光照不均处理策略
- 手写文档专用二值化
- 二值化质量评估

#### 4.4 透视矫正实战 (5-6页)

**4.4.1 仿射变换基础**
- 图像平移、旋转、缩放
- 仿射变换矩阵构建
- 边界处理与填充
- 组合变换实现

**4.4.2 透视变换实现**
- 四点对应透视矫正
- 手动选择角点矫正
- 输出尺寸计算
- 质量评估与调整

**4.4.3 自动文档矫正**
- 边缘检测与轮廓查找
- 四边形近似与筛选
- 角点精确定位
- 完整矫正流程实现

#### 4.5 综合实战：完整预处理流程 (3-4页)

**4.5.1 试卷预处理全流程**
- 输入图像分析与问题识别
- 去噪→增强→二值化→矫正顺序
- 参数自动选择策略
- 中间结果可视化

**4.5.2 交互式预处理工具**
- 参数滑块实时调整
- 效果对比显示
- 预设参数模板
- 批量处理功能

**4.5.3 性能优化与部署**
- 算法效率对比
- GPU加速实现
- 移动端部署考虑
- 生产环境最佳实践

### 5. 案例分析与互动 (5-8页)

#### 5.1 真实试卷预处理案例 (2-3页)
- 案例1：手机拍摄的模糊试卷
- 案例2：光照不均的扫描件
- 案例3：有折痕的老试卷
- 处理前后对比与效果评估

#### 5.2 行业应用案例 (2-3页)
- 扫描全能王的预处理技术
- 银行票据自动处理系统
- 档案数字化预处理流程
- 古籍文献修复与增强

#### 5.3 课堂互动与Quiz (1-2页)
- 预处理参数选择Quiz
- 问题诊断：识别图像缺陷
- 方案设计：给定场景选方法
- 最佳实践投票

### 6. 总结与作业 (3-5页)

#### 6.1 知识点总结 (1-2页)
- 预处理完整流程图
- 各方法优缺点对比表
- 参数选择速查表
- 常见问题解决方案

#### 6.2 课后作业 (1-2页)
- 作业要求详解
- 评分标准说明
- 提交格式要求
- 参考资源链接

#### 6.3 延伸学习资源 (1页)
- 推荐论文与书籍
- 在线课程与教程
- 开源项目参考
- 社区与论坛

---

## 实施计划

### 内容来源
1. 现有14页内容作为基础
2. 从各章节扩展内容中提取关键点
3. 参考OpenCV官方文档
4. 结合试卷识别实际案例

### 重点补充内容
1. **理论深度**：增加数学原理、算法推导
2. **实战代码**：每节配套完整可运行代码
3. **可视化**：增加处理前后对比图、流程图
4. **互动设计**：Quiz、思考题、讨论环节

### 优先级
1. P0：Live Coding实战部分（25页）
2. P1：核心理论与原理（18页）
3. P2：背景知识铺垫（10页）
4. P3：工具环境、案例、总结（7页）
