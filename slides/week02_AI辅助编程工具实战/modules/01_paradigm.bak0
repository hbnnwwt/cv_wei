%=============================================================================
% 模块一：认知升级——LLM 时代的编程新范式 (约 12 页)
%=============================================================================

\section{LLM时代的编程新范式}

% -----------------------------------------------------------------------------
% 1. 回顾与痛点
% -----------------------------------------------------------------------------

\begin{frame}{回顾：第1周的挑战}
    \begin{columns}
        \column{0.5\textwidth}
        \textbf{还记得这些痛点吗？}
        \begin{itemize}
            \item \texttt{cv2.imread()} 返回 \texttt{None}，找不到原因
            \item 图像显示颜色异常（BGR vs RGB）
            \item 数组越界、维度不匹配
            \item API 参数太多，记不住
        \end{itemize}

        \vspace{0.3cm}
        
        \begin{alertblock}{典型错误代码}
\begin{lstlisting}[language=Python, basicstyle=\ttfamily\tiny]
# 死循环！
while img is not None:
    cv2.imshow('image', img)
    if cv2.waitKey(1) == 'q':
        break
\end{lstlisting}
        \end{alertblock}

        \column{0.5\textwidth}
        \textbf{传统解决方式：}
        \begin{enumerate}
            \item 翻文档（\texttt{docs.opencv.org}）
            \item 搜索 StackOverflow
            \item 问同学/老师
            \item 试错（耗费大量时间）
        \end{enumerate}

        \vspace{0.3cm}

        \begin{exampleblock}{AI 辅助的新方式}
            \begin{itemize}
                \item 直接问 AI
                \item 解释错误原因
                \item 给出修改建议
                \item \textbf{降低学习门槛！}
            \end{itemize}
        \end{exampleblock}
    \end{columns}
\end{frame}

% -----------------------------------------------------------------------------
% 2. LLM 的本质
% -----------------------------------------------------------------------------

\begin{frame}{大模型写代码的本质}
    \begin{center}
        \Huge \textbf{Token 预测} \\[0.5cm]
        \Large + \\[0.5cm]
        \Huge \textbf{模式匹配}
    \end{center}

    \vspace{0.5cm}

    \begin{block}{为什么 AI 擅长语法但不一定懂逻辑？}
        \begin{itemize}
            \item \textbf{擅长：} 基于海量代码库的模式复刻
            \begin{itemize}
                \item OpenCV 的函数调用方式
                \item Python 的语法结构
                \item 常见的算法实现模式
            \end{itemize}
            \item \textbf{不擅长：} 理解你的具体业务逻辑
            \begin{itemize}
                \item 为什么你的答题卡要这样定位？
                \item 这个阈值为什么是 30\% 而不是 50\%？
                \item 你的实际应用场景约束是什么？
            \end{itemize}
        \end{itemize}
    \end{block}
\end{frame}

% -----------------------------------------------------------------------------
% 3. 幻觉专题
% -----------------------------------------------------------------------------

\begin{frame}{幻觉 (Hallucination) 专题}
    \begin{alertblock}{什么是 AI 幻觉？}
        AI 自信满满地生成看似合理但实际上错误或不存在的信息。
    \end{alertblock}

    \vspace{0.3cm}

    \textbf{案例：AI 发明了一个不存在的 OpenCV 函数}

    \begin{columns}
        \column{0.5\textwidth}
        \begin{exampleblock}{AI 的"创意"代码}
\begin{lstlisting}[language=Python, basicstyle=\ttfamily\tiny]
# AI 生成的代码
import cv2

img = cv2.imread('exam.jpg')

# 不存在的函数！
fixed = cv2.auto_fix_exposure(img)

# 还有这些也是不存在的
result = cv2.smart_denoise(img)
binary = cv2.optimal_threshold(img)
\end{lstlisting}
        \end{exampleblock}

        \column{0.5\textwidth}
        \textbf{为什么会产生幻觉？}
        \begin{enumerate}
            \item \textbf{模式补全：} AI 看到 \texttt{cv2.} 就自动补全成看起来像 OpenCV 的函数名
            \item \textbf{训练数据截止：} 某些新功能不存在于训练数据中，AI 就会"编造"
            \item \textbf{过度自信：} AI 不会说"我不知道"，而是会生成最可能的内容
        \end{enumerate}

        \vspace{0.3cm}

        \begin{block}{如何识别幻觉？}
            \begin{itemize}
                \item 查官方文档 (docs.opencv.org)
                \item 在 Python 中 \texttt{dir(cv2)} 查看所有可用函数
                \item 多问一句："这个函数真的存在吗？"
            \end{itemize}
        \end{block}
    \end{columns}
\end{frame}

% -----------------------------------------------------------------------------
% 4. 编程范式演进
% -----------------------------------------------------------------------------

\begin{frame}{编程范式的演进}
    \begin{center}
        \begin{tikzpicture}[
            node distance=2cm,
            box/.style={draw, rounded corners, minimum width=3cm, minimum height=1cm, align=center}
        ]
            \node[box, fill=blue!20] (v1) {1.0 阶段\\查阅文档/StackOverflow};
            \node[box, fill=green!20, right=of v1] (v2) {2.0 阶段\\AI 辅助编程};
            \node[box, fill=orange!20, right=of v2] (v3) {3.0 阶段\\AI 原生编程？};
            
            \draw[->, thick] (v1) -- (v2) node[midway, above] {效率提升};
            \draw[->, thick, dashed] (v2) -- (v3) node[midway, above] {未来趋势};
        \end{tikzpicture}
    \end{center}

    \vspace{0.3cm}

    \begin{columns}
        \column{0.33\textwidth}
        \textbf{1.0 阶段：查阅文档/StackOverflow}
        \begin{itemize}
            \item 手动搜索
            \item 阅读文档
            \item 试错调试
        \end{itemize}
        \textbf{效率：}⭐⭐☆☆☆

        \column{0.33\textwidth}
        \textbf{2.0 阶段：AI 辅助}
        \begin{itemize}
            \item 从"写作者"转变为"审查者"
            \item AI 生成初稿，人审查修改
            \item 快速原型验证
        \end{itemize}
        \textbf{效率：}⭐⭐⭐⭐☆

        \column{0.33\textwidth}
        \textbf{3.0 阶段：AI 原生？}
        \begin{itemize}
            \item AI 直接理解需求生成完整系统
            \item 人主要负责需求定义和架构设计
            \item 可能的未来方向
        \end{itemize}
        \textbf{效率：}⭐⭐⭐⭐⭐？
    \end{columns}

    \vspace{0.5cm}

    \begin{block}{核心结论：程序员的核心竞争力转变}
        \begin{center}
            \Large 从 \textbf{"记忆语法"} 转向 \textbf{"问题定义"} 与 \textbf{"代码审查"}
        \end{center}
    \end{block}
\end{frame}
